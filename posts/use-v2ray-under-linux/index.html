<!doctype html><html><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>استفاده از v2ray در لینوکس - کلاینت v2ray
| بلاگ مهدی اکبری</title><link rel=stylesheet href=https://blackestwhite.github.io/style.css></head><body class="container mx-auto rtl"><header><div class="my-4 border-b"><div class=flex><div><img src="https://avatars1.githubusercontent.com/u/33098161?s=460&u=29871eef7376c5612bb255f1ba1aae1d14b8583b&v=4" class="w-24 h-24 rounded-full"></div><div class="flex items-center"><div class=mr-2><h1 class=font-bold>مهدی اکبری</h1><h2>توسعه دهنده</h2></div></div></div><nav class="flex mt-4"><a href=/ class="m-3 text-sky-500">خانه</a>
<a href=/posts class="m-3 text-sky-500">لیست نوشته ها</a></nav></div></header><main><h1 class="my-8 text-xl font-bold border-r-4 border-slate-300 p-3">استفاده از v2ray در لینوکس - کلاینت v2ray</h1><p>از حدود دو ماه پیش که با کلاینتای مختلف <code>v2ray</code> سر و کله میزدم. بنظرم زیاد جالب نبودن تصمیم گرفتم کلا به صورت خام از خود core و دستی نوشتن کانفیگا ازش استفاده کنم.<br><br></p><h2 id=install-v2ray>نصب v2ray</h2><p>از لینک زیر v2ray-core رو دانلود کنید<br><br></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>https://github.com/v2ray/v2ray-core/releases/
</span></span></code></pre></div><p><br><br>از حالت زیپ خارج کنیدش<br><br></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>unzip v2ray-linux-64.zip -d v2ray-linux-64
</span></span></code></pre></div><p><br><br>بعد از خارج کردن از حالت زیپ فایل های مربوطه رو به صورت زیر با دستور <code>mv</code> جابجا کنید<br><br></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>v2ray -&gt; /usr/local/bin/v2ray
</span></span><span style=display:flex><span>geoip.dat -&gt; /usr/local/share/v2ray/geoip.dat
</span></span><span style=display:flex><span>geosite.dat -&gt; /usr/local/share/v2ray/geosite.dat
</span></span><span style=display:flex><span>config.json -&gt; /usr/local/etc/v2ray/config.json
</span></span><span style=display:flex><span>v2ray.service -&gt; /etc/systemd/system/v2ray.service
</span></span><span style=display:flex><span>v2ray@.service -&gt; /etc/systemd/system/v2ray@.service
</span></span></code></pre></div><p><br></p><h2 id=فایل-کانفیگ>فایل کانفیگ</h2><p>این فقط یه نمونه است که ببینید فایل کانفیگ چجوریه<br>برای اینکه درست کار کنه باید کانفیگ خودتون رو توی قسمت outbounds اضافه کنید<br>برای مثال من از پرتکل vmess روی وب سوکت استفاده میکنم.<br>اگر شما هم همین پرتکل رو استفاده میکنید صرفا مقادیر آدرس، پورت و آیدی(فرمت uuid v4) رو عوض کنید.<br><br></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;routing&#34;</span>: {
</span></span><span style=display:flex><span>        <span style=color:#f92672>&#34;domainStrategy&#34;</span>: <span style=color:#e6db74>&#34;Asls&#34;</span>
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;inbounds&#34;</span>: [
</span></span><span style=display:flex><span>        {
</span></span><span style=display:flex><span>            <span style=color:#f92672>&#34;sniffing&#34;</span>: {
</span></span><span style=display:flex><span>                <span style=color:#f92672>&#34;enabled&#34;</span>: <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>            },
</span></span><span style=display:flex><span>            <span style=color:#f92672>&#34;listen&#34;</span>: <span style=color:#e6db74>&#34;127.0.0.1&#34;</span>,
</span></span><span style=display:flex><span>            <span style=color:#f92672>&#34;protocol&#34;</span>: <span style=color:#e6db74>&#34;socks&#34;</span>,
</span></span><span style=display:flex><span>            <span style=color:#f92672>&#34;settings&#34;</span>: {
</span></span><span style=display:flex><span>                <span style=color:#f92672>&#34;udp&#34;</span>: <span style=color:#66d9ef>true</span>,
</span></span><span style=display:flex><span>                <span style=color:#f92672>&#34;auth&#34;</span>: <span style=color:#e6db74>&#34;noauth&#34;</span>,
</span></span><span style=display:flex><span>                <span style=color:#f92672>&#34;userLevel&#34;</span>: <span style=color:#ae81ff>8</span>
</span></span><span style=display:flex><span>            },
</span></span><span style=display:flex><span>            <span style=color:#f92672>&#34;tag&#34;</span>: <span style=color:#e6db74>&#34;socks&#34;</span>,
</span></span><span style=display:flex><span>            <span style=color:#f92672>&#34;port&#34;</span>: <span style=color:#ae81ff>10808</span>
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    ],
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;outbounds&#34;</span>: [
</span></span><span style=display:flex><span>        {
</span></span><span style=display:flex><span>            <span style=color:#f92672>&#34;mux&#34;</span>: {
</span></span><span style=display:flex><span>                <span style=color:#f92672>&#34;enabled&#34;</span>: <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>            },
</span></span><span style=display:flex><span>            <span style=color:#f92672>&#34;streamSettings&#34;</span>: {
</span></span><span style=display:flex><span>                <span style=color:#f92672>&#34;network&#34;</span>: <span style=color:#e6db74>&#34;ws&#34;</span>,
</span></span><span style=display:flex><span>                <span style=color:#f92672>&#34;wsSettings&#34;</span>: {
</span></span><span style=display:flex><span>                    <span style=color:#f92672>&#34;path&#34;</span>: <span style=color:#e6db74>&#34;/&#34;</span>,
</span></span><span style=display:flex><span>                    <span style=color:#f92672>&#34;headers&#34;</span>: {
</span></span><span style=display:flex><span>                        <span style=color:#f92672>&#34;Host&#34;</span>: <span style=color:#e6db74>&#34;&#34;</span>
</span></span><span style=display:flex><span>                    }
</span></span><span style=display:flex><span>                },
</span></span><span style=display:flex><span>                <span style=color:#f92672>&#34;security&#34;</span>: <span style=color:#e6db74>&#34;none&#34;</span>
</span></span><span style=display:flex><span>            },
</span></span><span style=display:flex><span>            <span style=color:#f92672>&#34;protocol&#34;</span>: <span style=color:#e6db74>&#34;vmess&#34;</span>,
</span></span><span style=display:flex><span>            <span style=color:#f92672>&#34;settings&#34;</span>: {
</span></span><span style=display:flex><span>                <span style=color:#f92672>&#34;vnext&#34;</span>: [
</span></span><span style=display:flex><span>                    {
</span></span><span style=display:flex><span>                        <span style=color:#f92672>&#34;address&#34;</span>: <span style=color:#e6db74>&#34;domain-or-ip.com&#34;</span>,
</span></span><span style=display:flex><span>                        <span style=color:#f92672>&#34;users&#34;</span>: [
</span></span><span style=display:flex><span>                            {
</span></span><span style=display:flex><span>                                <span style=color:#f92672>&#34;id&#34;</span>: <span style=color:#e6db74>&#34;uuid-v4&#34;</span>,
</span></span><span style=display:flex><span>                                <span style=color:#f92672>&#34;alterId&#34;</span>: <span style=color:#ae81ff>0</span>,
</span></span><span style=display:flex><span>                                <span style=color:#f92672>&#34;security&#34;</span>: <span style=color:#e6db74>&#34;auto&#34;</span>,
</span></span><span style=display:flex><span>                                <span style=color:#f92672>&#34;level&#34;</span>: <span style=color:#ae81ff>8</span>
</span></span><span style=display:flex><span>                            }
</span></span><span style=display:flex><span>                        ],
</span></span><span style=display:flex><span>                        <span style=color:#f92672>&#34;port&#34;</span>: <span style=color:#ae81ff>80</span>
</span></span><span style=display:flex><span>                    }
</span></span><span style=display:flex><span>                ]
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    ],
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;log&#34;</span>: {
</span></span><span style=display:flex><span>        <span style=color:#f92672>&#34;loglevel&#34;</span>: <span style=color:#e6db74>&#34;none&#34;</span>
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;dns&#34;</span>: {
</span></span><span style=display:flex><span>        <span style=color:#f92672>&#34;servers&#34;</span>: [
</span></span><span style=display:flex><span>            <span style=color:#e6db74>&#34;8.8.8.8&#34;</span>,
</span></span><span style=display:flex><span>            <span style=color:#e6db74>&#34;8.8.4.4&#34;</span>
</span></span><span style=display:flex><span>        ]
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p><br></p><h2 id=use-v2ray>استفاده از v2ray</h2><p><br></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># راه اندازی v2ray</span>
</span></span><span style=display:flex><span>sudo systemctl start v2ray
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># بررسی وضعیت v2ray</span>
</span></span><span style=display:flex><span>sudo systemctl status v2ray
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># فعال کردن v2ray</span>
</span></span><span style=display:flex><span>sudo systemctl enable v2ray
</span></span></code></pre></div><p><br><br>اگر کانفیگتون سالم باشه(فیلتر نشده باشه) و درست فایل جیسون رو ادیت زده باشید. روی پورت <code>10808</code> یه پروکسی SOCKS5 دارید.<br>حالا میتونید از این پروکسی توی تلگرام یا کل سیستم استفاده کنید.<br>مثلا من که سیستمی که دارم باهاش این پست رو مینویسم اوبنتو هستش توی مسیر زیر میتونم پروکسی رو فعال کنم<br><br></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># مسیر تنظیم:</span>
</span></span><span style=display:flex><span>Settings &gt; Network &gt; Network Proxy &gt; Manual
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Socks Host: localhost
</span></span><span style=display:flex><span>Port: <span style=color:#ae81ff>10808</span>
</span></span></code></pre></div><p><br><br>موفق باشید</p></main><footer><div class=h-36></div><div class=h-36></div><div class="border-t py-4 flex justify-center flex-wrap fixed w-full bottom-0 bg-white right-0 left-0"><a href=https://instagram.com/itsblackestwhite class=m-4>instagram</a>
<a href=https://www.goodreads.com/user/show/109038275-mahdi-akbari class=m-4>goodreads</a>
<a href=https://www.youtube.com/@blackestwhite class=m-4>youtube</a>
<a href=http://t.me/meNevise class=m-4>telegram</a>
<a href=https://twitter.com/byblackestwhite class=m-4>twitter</a>
<a href=https://github.com/blackestwhite class=m-4>github</a></div></footer></body></html>